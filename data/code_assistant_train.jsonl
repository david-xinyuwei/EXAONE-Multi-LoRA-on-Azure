{"conversations": [{"from": "human", "value": "How do I implement binary search in Python?"}, {"from": "gpt", "value": "Here's a binary search function in Python:\n```python\ndef binary_search(arr: list[int], target: int) -> int:\n    \"\"\"\n    Perform binary search on a sorted list.\n    Args:\n        arr (list[int]): Sorted list of integers.\n        target (int): Value to search for.\n    Returns:\n        int: Index of target, or -1 if not found.\n    Time Complexity: O(log n)\n    Space Complexity: O(1)\n    \"\"\"\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n```\nBest practice: Ensure array is sorted. Anti-pattern: Linear search in sorted arrays."}]}
{"conversations": [{"from": "human", "value": "What’s the difference between a stack and a queue in data structures?"}, {"from": "gpt", "value": "Stack follows Last-In-First-Out (LIFO), queue is First-In-First-Out (FIFO).\nPython implementations:\n```python\nfrom collections import deque\nclass Stack:\n    def __init__(self) -> None:\n        self.stack = []\n    def push(self, item: int) -> None:\n        self.stack.append(item)\n    def pop(self) -> int:\n        return self.stack.pop()\nclass Queue:\n    def __init__(self) -> None:\n        self.queue = deque()\n    def enqueue(self, item: int) -> None:\n        self.queue.append(item)\n    def dequeue(self) -> int:\n        return self.queue.popleft()\n```\nStack: O(1) push/pop; Queue: O(1) enqueue/dequeue. Anti-pattern: Using list for queue (O(n) dequeue)."}]}
{"conversations": [{"from": "human", "value": "Can you show an example of the Singleton design pattern in TypeScript?"}, {"from": "gpt", "value": "Certainly! Singleton ensures only one instance.\n```typescript\nclass Singleton {\n    private static instance: Singleton;\n    private constructor() {}\n    static getInstance(): Singleton {\n        if (!Singleton.instance) {\n            Singleton.instance = new Singleton();\n        }\n        return Singleton.instance;\n    }\n}\n```\nBest practice: Keep constructor private. Anti-pattern: Exposing constructor, allowing multiple instances.\nSingletons can be hard to test due to global state."}]}
{"conversations": [{"from": "human", "value": "How do you create a REST API endpoint in Go?"}, {"from": "gpt", "value": "Here's a simple REST endpoint using Go's net/http package:\n```go\npackage main\nimport (\n    \"encoding/json\"\n    \"net/http\"\n)\n// User defines data model\ntype User struct {\n    ID   int    `json:\"id\"`\n    Name string `json:\"name\"`\n}\n// Handle GET request for /user\nfunc userHandler(w http.ResponseWriter, r *http.Request) {\n    user := User{ID: 1, Name: \"Alice\"}\n    w.Header().Set(\"Content-Type\", \"application/json\")\n    json.NewEncoder(w).Encode(user)\n}\nfunc main() {\n    http.HandleFunc(\"/user\", userHandler)\n    http.ListenAndServe(\":8080\", nil)\n}\n```\nComplexity: O(1) per request. Best practice: Use goroutines for concurrency. Anti-pattern: Global mutable state."}]}
{"conversations": [{"from": "human", "value": "How do I write a SQL query to get the average salary grouped by department?"}, {"from": "gpt", "value": "Here's how you can do it:\n```sql\nSELECT department, AVG(salary) AS avg_salary\nFROM employees\nGROUP BY department;\n```\nTime complexity: O(n) where n is number of rows. Best practice: Index department. Anti-pattern: Not using GROUP BY when aggregating by category."}]}
{"conversations": [{"from": "human", "value": "What’s the fastest way to reverse a linked list in Python?"}, {"from": "gpt", "value": "Here's an in-place reversal (O(n) time, O(1) space):\n```python\nclass Node:\n    def __init__(self, data: int, next: 'Node' = None):\n        self.data = data\n        self.next = next\n    def __repr__(self) -> str:\n        return f'{self.data}'\ndef reverse_linked_list(head: Node) -> Node:\n    \"\"\"\n    Reverses a singly linked list.\n    Args:\n        head (Node): Head of the list.\n    Returns:\n        Node: New head.\n    \"\"\"\n    prev = None\n    current = head\n    while current:\n        next_node = current.next\n        current.next = prev\n        prev = current\n        current = next_node\n    return prev\n```\nAnti-pattern: Recursion (stack overflow for long lists)."}]}
{"conversations": [{"from": "human", "value": "How do you test a Python function using unittest?"}, {"from": "gpt", "value": "Example test with unittest:\n```python\nimport unittest\ndef add(a: int, b: int) -> int:\n    \"\"\"Returns sum of a and b.\"\"\"\n    return a + b\nclass TestAdd(unittest.TestCase):\n    def test_add_positive(self):\n        self.assertEqual(add(2, 3), 5)\n    def test_add_negative(self):\n        self.assertEqual(add(-1, -1), -2)\nif __name__ == '__main__':\n    unittest.main()\n```\nBest practice: Test edge cases. Anti-pattern: No assertions or duplicating test code."}]}
{"conversations": [{"from": "human", "value": "How do you debug a TypeScript error when types don’t match?"}, {"from": "gpt", "value": "Use TypeScript’s compiler output and source maps. Example:\n```typescript\nfunction greet(name: string): string {\n    return 'Hello, ' + name;\n}\n// Error:\ngreet(42); // TS error: Argument of type 'number' is not assignable to parameter of type 'string'\n```\nBest practice: Explicit types and interfaces. Anti-pattern: Using 'any' everywhere. Use IDE tools and tsc --noEmit for debugging."}]}
{"conversations": [{"from": "human", "value": "Show how to use Python’s multiprocessing to speed up computation."}, {"from": "gpt", "value": "Example with Pool for parallel computation:\n```python\nfrom multiprocessing import Pool\ndef square(x: int) -> int:\n    \"\"\"Returns x squared.\"\"\"\n    return x * x\nif __name__ == '__main__':\n    with Pool(processes=4) as pool:\n        data = [1, 2, 3, 4]\n        results = pool.map(square, data)\n        print(results)  # [1, 4, 9, 16]\n```\nTime complexity: O(n/p) with p processes. Best practice: Avoid sharing state. Anti-pattern: Use threading for CPU-bound tasks."}]}
{"conversations": [{"from": "human", "value": "What’s a common anti-pattern in web development with Python Flask?"}, {"from": "gpt", "value": "A common anti-pattern is keeping mutable global state:\n```python\nusers = []  # Global mutable list\n@app.route('/add_user')\ndef add_user():\n    users.append('new_user')\n    return 'User added!'\n```\nAnti-pattern: Not thread-safe. Best practice: Use database or session, not global lists. Flask is multi-threaded; globals cause race conditions."}]}
{"conversations": [{"from": "human", "value": "How do you perform input validation for a REST API in TypeScript with Express?"}, {"from": "gpt", "value": "Use middleware like express-validator:\n```typescript\nimport { body, validationResult } from 'express-validator';\napp.post('/user', [\n    body('email').isEmail(),\n    body('age').isInt({ min: 0 })\n], (req, res) => {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n        return res.status(400).json({ errors: errors.array() });\n    }\n    // Valid input\n    res.send('User created');\n});\n```\nBest practice: Centralized validation. Anti-pattern: No validation, leading to security holes."}]}
{"conversations": [{"from": "human", "value": "How can I optimize SQL queries for performance?"}, {"from": "gpt", "value": "General tips:\n- Use proper indexes (WHERE and JOIN columns)\n- Avoid SELECT * (fetch only needed columns)\n- Analyze execution plans\nExample:\n```sql\nEXPLAIN SELECT id, name FROM users WHERE email = 'user@example.com';\n```\nBest practice: Use indexes. Anti-pattern: Complex subqueries without indexes. Time: O(log n) with index."}]}
{"conversations": [{"from": "human", "value": "What’s the producer-consumer problem in concurrency and how can it be solved in Python?"}, {"from": "gpt", "value": "Producer-consumer using Queue:\n```python\nfrom queue import Queue\nfrom threading import Thread\nimport time\nq = Queue()\ndef producer():\n    for i in range(5):\n        q.put(i)\n        print(f'Produced {i}')\n        time.sleep(1)\ndef consumer():\n    while True:\n        item = q.get()\n        print(f'Consumed {item}')\n        q.task_done()\nThread(target=producer).start()\nThread(target=consumer, daemon=True).start()\nq.join()\n```\nBest practice: Use thread-safe queue. Anti-pattern: Shared lists without locks leading to race conditions."}]}
{"conversations": [{"from": "human", "value": "How do you prevent SQL injection in database queries?"}, {"from": "gpt", "value": "Always use parameterized queries:\n```python\nimport sqlite3\nconn = sqlite3.connect(':memory:')\ncur = conn.cursor()\ncur.execute('CREATE TABLE users (id INTEGER, name TEXT);')\nuser_id = 1\ncur.execute('SELECT * FROM users WHERE id=?', (user_id,))\n```\nBest practice: No string formatting for SQL. Anti-pattern: Using f-strings or concatenation for SQL queries."}]}
{"conversations": [{"from": "human", "value": "How do you write a Bash script to monitor disk space and alert when full?"}, {"from": "gpt", "value": "Example Bash script:\n```bash\n#!/bin/bash\nTHRESHOLD=90\nUSAGE=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')\nif [ \"$USAGE\" -ge \"$THRESHOLD\" ]; then\n  echo \"Disk space critically high! ($USAGE%)\" | mail -s \"Disk Alert\" admin@example.com\nfi\n```\nBest practice: Use exit codes. Anti-pattern: Not checking command outputs for errors."}]}
{"conversations": [{"from": "human", "value": "What is a basic ML model in Python using scikit-learn?"}, {"from": "gpt", "value": "Example: Logistic Regression for binary classification.\n```python\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import accuracy_score\nimport numpy as np\nX = np.array([[0], [1], [2], [3]])\ny = np.array([0, 0, 1, 1])\nX_train, X_test, y_train, y_test = train_test_split(X, y)\nmodel = LogisticRegression()\nmodel.fit(X_train, y_train)\npreds = model.predict(X_test)\nprint('Accuracy:', accuracy_score(y_test, preds))\n```\nBest practice: Train/test split and feature scaling. Anti-pattern: Training and testing on same data."}]}
{"conversations": [{"from": "human", "value": "How do you implement memoization in Python for recursive algorithms?"}, {"from": "gpt", "value": "Use functools.lru_cache:\n```python\nfrom functools import lru_cache\n@lru_cache(maxsize=None)\ndef fib(n: int) -> int:\n    \"\"\"Efficient Fibonacci with memoization.\"\"\"\n    if n < 2:\n        return n\n    return fib(n-1) + fib(n-2)\n```\nTime complexity: O(n). Best practice: Use cache for overlapping subproblems. Anti-pattern: No caching, leading to exponential time."}]}
{"conversations": [{"from": "human", "value": "How do you write unit tests for a Rust function?"}, {"from": "gpt", "value": "Example:\n```rust\n/// Adds two numbers.\npub fn add(a: i32, b: i32) -> i32 {\n    a + b\n}\n#[cfg(test)]\nmod tests {\n    use super::*;\n    #[test]\n    fn test_add() {\n        assert_eq!(add(2, 3), 5);\n        assert_eq!(add(-1, 1), 0);\n    }\n}\n```\nRun with `cargo test`. Best practice: Test edge cases. Anti-pattern: Not using #[test] or missing asserts."}]}
{"conversations": [{"from": "human", "value": "What’s the best way to paginate large datasets in a web API?"}, {"from": "gpt", "value": "Use limit and offset or cursor-based pagination.\nExample SQL:\n```sql\nSELECT * FROM products ORDER BY id LIMIT 50 OFFSET 100;\n```\nBest practice: Use indexes (ORDER BY field indexed). Cursor-based for consistency. Anti-pattern: No pagination, sending all data at once."}]}
{"conversations": [{"from": "human", "value": "How do you deploy a Python web app to AWS using Docker?"}, {"from": "gpt", "value": "Dockerize your app, then deploy with ECS or EC2:\n```Dockerfile\n# Dockerfile\nFROM python:3.10\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\nCMD [\"python\", \"app.py\"]\n```\n- Build image: `docker build -t myapp .`\n- Push to ECR\n- Deploy via ECS\nBest practice: Use environment variables for secrets. Anti-pattern: Hardcoded credentials in Dockerfile."}]}
{"conversations": [{"from": "human", "value": "How do you secure a web form from CSRF attacks?"}, {"from": "gpt", "value": "Use CSRF tokens.\nExample in Flask:\n```python\nfrom flask import Flask, session, request\nimport secrets\napp = Flask(__name__)\napp.secret_key = 'secret!'\n@app.route('/form', methods=['GET', 'POST'])\ndef form():\n    if request.method == 'POST':\n        token = request.form['csrf_token']\n        if token != session.get('csrf_token'):\n            return 'CSRF detected!', 400\n    session['csrf_token'] = secrets.token_hex(16)\n    return f'<form method=\"post\"><input name=\"csrf_token\" value=\"{session[\"csrf_token\"]}\"></form>'\n```\nBest practice: Regenerate token per session. Anti-pattern: No CSRF checks."}]}
{"conversations": [{"from": "human", "value": "What is a binary search algorithm in Python, and how do I implement it efficiently?"}, {"from": "gpt", "value": "Binary search is a classic algorithm to find the position of a target value within a sorted array in O(log n) time. It avoids linear scanning by repeatedly halving the search interval.\n\nHere's an efficient implementation:\n\n```python\nfrom typing import List, Optional\n\ndef binary_search(arr: List[int], target: int) -> Optional[int]:\n    \"\"\"\n    Performs binary search on a sorted list.\n    Returns the index of target if found, else None.\n    Complexity: O(log n) time, O(1) space.\n    \"\"\"\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return None\n```\n\nBest Practices:\n- Always ensure the array is sorted.\n- Watch out for integer overflow in calculating `mid` (use `mid = left + (right - left) // 2`).\n\nAnti-patterns:\n- Using recursion for very large arrays can cause stack overflow; prefer iteration.\n"}]}
{"conversations": [{"from": "human", "value": "How do I use a hash map (dictionary) in Python for fast retrieval, and what are its complexity characteristics?"}, {"from": "gpt", "value": "Python's dictionary (hash map) provides O(1) average-case lookups and inserts, thanks to underlying hash tables.\n\nExample:\n\n```python\ndef demo_dict_usage():\n    \"\"\"\n    Demonstrates fast retrieval with a dictionary.\n    \"\"\"\n    user_scores = {\n        'alice': 95,\n        'bob': 87,\n        'charlie': 78\n    }\n    # Retrieval\n    print(user_scores['bob'])  # Output: 87\n    # Insert\n    user_scores['dave'] = 92\n```\n\nComplexity:\n- Lookup/Insertion: O(1) average, O(n) worst-case (rare, due to collisions).\n\nBest Practices:\n- Use immutable keys (e.g., strings, integers).\n\nAnti-patterns:\n- Using mutable types (like lists) as keys can cause errors.\n"}]}
{"conversations": [{"from": "human", "value": "Can you demonstrate the Singleton design pattern in Python and discuss its pros and cons?"}, {"from": "gpt", "value": "The Singleton pattern ensures a class has only one instance. Here's a Pythonic solution:\n\n```python\nclass Singleton:\n    _instance = None\n\n    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super(Singleton, cls).__new__(cls)\n        return cls._instance\n```\n\nUsage:\n\n```python\ns1 = Singleton()\ns2 = Singleton()\nassert s1 is s2  # True\n```\n\nPros:\n- Useful for shared resources (e.g., config, logging).\n\nCons/Anti-patterns:\n- Hinders unit testing due to global state.\n- Can create hidden dependencies; prefer dependency injection.\nComplexity is O(1) for instantiation.\n"}]}
{"conversations": [{"from": "human", "value": "How do I create a RESTful API endpoint in Python using Flask?"}, {"from": "gpt", "value": "Flask is a lightweight web framework. Here's a basic REST API example:\n\n```python\nfrom flask import Flask, jsonify, request\napp = Flask(__name__)\n\n@app.route('/api/users', methods=['GET'])\ndef get_users():\n    \"\"\"\n    Returns a list of users as JSON.\n    \"\"\"\n    users = [{'id': 1, 'name': 'Alice'}, {'id': 2, 'name': 'Bob'}]\n    return jsonify(users)\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    \"\"\"\n    Creates a new user from request data.\n    \"\"\"\n    data = request.get_json()\n    return jsonify({'id': 3, 'name': data['name']}), 201\n```\n\nComplexity: O(1) for endpoint handling.\nBest Practices: Validate input, set appropriate status codes.\nAnti-patterns: Don't expose sensitive data.\n"}]}
{"conversations": [{"from": "human", "value": "How do you implement a linked list in Go, including inserting and deleting nodes?"}, {"from": "gpt", "value": "Go lacks built-in linked lists, so you implement them manually.\n\n```go\npackage main\nimport \"fmt\"\n\n// Node represents a node in a singly linked list\n type Node struct {\n     Value int\n     Next  *Node\n }\n\n// LinkedList manages nodes\n type LinkedList struct {\n     Head *Node\n }\n\nfunc (l *LinkedList) Insert(val int) {\n     node := &Node{Value: val}\n     node.Next = l.Head\n     l.Head = node\n }\n\nfunc (l *LinkedList) Delete(val int) {\n     prev := (*Node)(nil)\n     curr := l.Head\n     for curr != nil {\n         if curr.Value == val {\n             if prev == nil {\n                 l.Head = curr.Next\n             } else {\n                 prev.Next = curr.Next\n             }\n             return\n         }\n         prev = curr\n         curr = curr.Next\n     }\n }\n\nfunc main() {\n     ll := &LinkedList{}\n     ll.Insert(10)\n     ll.Insert(20)\n     ll.Delete(10)\n     fmt.Println(ll.Head.Value) // Output: 20\n}\n```\n\nComplexity:\n- Insert: O(1)\n- Delete: O(n)\nAnti-patterns: Forgetting edge cases (head/tail).\n"}]}
{"conversations": [{"from": "human", "value": "How can I index and query data efficiently in a SQL database?"}, {"from": "gpt", "value": "Indexes speed up searches in SQL databases by providing quick access paths. Example for PostgreSQL or MySQL:\n\n```sql\n-- Create an index on users table\nCREATE INDEX idx_users_email ON users(email);\n```\n\nQuery:\n\n```sql\nSELECT * FROM users WHERE email = 'alice@example.com';\n```\n\nComplexity:\n- With index: O(log n)\n- Without index: O(n)\nBest Practices:\n- Index columns frequently used in WHERE or JOIN.\nAnti-patterns:\n- Over-indexing slows writes/updates, increases storage.\nCheck execution plan with `EXPLAIN`.\n"}]}
{"conversations": [{"from": "human", "value": "How do I write table-driven tests in Go for a simple function?"}, {"from": "gpt", "value": "Table-driven tests are Go's best practice, making tests concise and scalable.\n\n```go\npackage main\nimport \"testing\"\n\nfunc Sum(a, b int) int {\n    return a + b\n}\n\nfunc TestSum(t *testing.T) {\n    cases := []struct {\n        a, b, want int\n    }{\n        {1, 2, 3},\n        {0, 0, 0},\n        {-1, 1, 0},\n    }\n    for _, c := range cases {\n        got := Sum(c.a, c.b)\n        if got != c.want {\n            t.Errorf(\"Sum(%d, %d) = %d, want %d\", c.a, c.b, got, c.want)\n        }\n    }\n}\n```\n\nComplexity: O(1) per test case.\nBest Practices: Clearly name cases, cover edge cases.\nAnti-patterns: Avoid copying test logic outside loops."}]}
{"conversations": [{"from": "human", "value": "What is memoization in Python, and how does it optimize recursive algorithms?"}, {"from": "gpt", "value": "Memoization caches expensive function results, optimizing recursive calls. Example: Fibonacci in O(n) instead of O(2^n).\n\n```python\nfrom functools import lru_cache\n\ndef fib(n: int) -> int:\n    \"\"\"\n    Returns nth Fibonacci number using memoization.\n    \"\"\"\n    @lru_cache(maxsize=None)\n    def _fib(k):\n        if k < 2:\n            return k\n        return _fib(k-1) + _fib(k-2)\n    return _fib(n)\n```\n\nComplexity:\n- Time: O(n)\n- Space: O(n)\nBest Practices: Use `lru_cache` or explicit dicts.\nAnti-patterns: Unbounded cache growth for large domains."}]}
{"conversations": [{"from": "human", "value": "How can I debug memory leaks in a Python web application?"}, {"from": "gpt", "value": "Memory leaks in Python web apps often arise from lingering references or global objects. To debug:\n\n- Use `tracemalloc` to track allocations.\n- Profile with `objgraph` to visualize objects.\n\nExample:\n\n```python\nimport tracemalloc\n\ntracemalloc.start()\n# Run web request...\nsnapshot = tracemalloc.take_snapshot()\nfor stat in snapshot.statistics('filename')[:10]:\n    print(stat)\n```\n\nComplexity: Profiling adds O(n) overhead.\nBest Practices:\n- Release references, avoid global caches.\nAnti-patterns:\n- Forgetting to close DB connections or files."}]}
{"conversations": [{"from": "human", "value": "How do you implement thread-safe counters in Rust using atomic operations?"}, {"from": "gpt", "value": "Rust's `AtomicUsize` provides thread-safe counters without locking. Example:\n\n```rust\nuse std::sync::atomic::{AtomicUsize, Ordering};\n\n/// Thread-safe global counter\nstatic COUNTER: AtomicUsize = AtomicUsize::new(0);\n\nfn increment() {\n    COUNTER.fetch_add(1, Ordering::SeqCst);\n}\n\nfn get_count() -> usize {\n    COUNTER.load(Ordering::SeqCst)\n}\n```\n\nComplexity:\n- Increment/Read: O(1)\nBest Practices:\n- Use appropriate memory ordering (`SeqCst` for safety).\nAnti-patterns:\n- Don't mix atomics and locks unnecessarily."}]}
{"conversations": [{"from": "human", "value": "How can I perform SQL injection prevention in a TypeScript Node.js app?"}, {"from": "gpt", "value": "Always use parameterized queries or ORM methods, never string concatenation. Example with `pg`:\n\n```typescript\nimport { Pool } from 'pg';\nconst pool = new Pool();\n\nasync function getUserByEmail(email: string): Promise<any> {\n    const res = await pool.query('SELECT * FROM users WHERE email = $1', [email]);\n    return res.rows[0];\n}\n```\n\nComplexity: O(n) with index, O(1) for parameter substitution.\nBest Practices:\n- Validate input types.\nAnti-patterns:\n- `SELECT * FROM users WHERE email = '\" + email + \"'` (never do this)."}]}
{"conversations": [{"from": "human", "value": "How do I deploy a Dockerized Python app to AWS ECS using Bash scripting?"}, {"from": "gpt", "value": "You can automate ECS deployments with Bash and AWS CLI. Example script:\n\n```bash\n#!/bin/bash\n# Build and push Docker image\ndocker build -t myapp .\naws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <account_id>.dkr.ecr.us-east-1.amazonaws.com\ndocker tag myapp:latest <repo>:latest\ndocker push <repo>:latest\n# Update ECS service\naws ecs update-service --cluster mycluster --service myservice \\\n    --force-new-deployment\n```\n\nBest Practices:\n- Use environment variables for secrets.\nAnti-patterns:\n- Hardcoding credentials in scripts."}]}
{"conversations": [{"from": "human", "value": "How do you use Python's unittest framework to test database access functions?"}, {"from": "gpt", "value": "Python's `unittest` can test DB functions by mocking connections or using test databases.\n\n```python\nimport unittest\nfrom unittest.mock import MagicMock\n\ndef get_user(cursor, user_id: int) -> dict:\n    cursor.execute('SELECT * FROM users WHERE id=%s', (user_id,))\n    return cursor.fetchone()\n\nclass TestDB(unittest.TestCase):\n    def test_get_user(self):\n        mock_cursor = MagicMock()\n        mock_cursor.fetchone.return_value = {'id': 1, 'name': 'Alice'}\n        user = get_user(mock_cursor, 1)\n        self.assertEqual(user['name'], 'Alice')\n```\n\nComplexity: O(1) per test.\nBest Practices: Use mocks, reset state between tests."}]}
{"conversations": [{"from": "human", "value": "How do you implement rate limiting in a Python web server to mitigate abuse?"}, {"from": "gpt", "value": "Rate limiting restricts request frequency. Use token bucket or fixed window algorithms. Example with Flask and Redis:\n\n```python\nfrom flask import Flask, request, abort\nimport redis\nimport time\n\nr = redis.StrictRedis()\napp = Flask(__name__)\n\n@app.route('/api')\ndef api():\n    key = f\"rate:{request.remote_addr}\"\n    curr = r.get(key)\n    if curr and int(curr) >= 10:\n        abort(429)  # Too Many Requests\n    else:\n        r.incr(key)\n        r.expire(key, 60)\n        return 'OK'\n```\n\nComplexity: O(1) per request.\nBest Practices: Use distributed cache.\nAnti-patterns: Blocking requests without error code."}]}
{"conversations": [{"from": "human", "value": "How can I use Python's logging module to debug production errors efficiently?"}, {"from": "gpt", "value": "Python's logging captures errors with timestamps, levels, and context. Example:\n\n```python\nimport logging\n\nlogging.basicConfig(\n    filename='app.log', level=logging.ERROR,\n    format='%(asctime)s %(levelname)s %(message)s')\n\ntry:\n    1 / 0\nexcept Exception as e:\n    logging.error(\"Error occurred\", exc_info=True)\n```\n\nComplexity: O(1) per log.\nBest Practices:\n- Structure logs, use levels.\nAnti-patterns:\n- Printing directly (e.g., `print()`), missing context."}]}
{"conversations": [{"from": "human", "value": "How do you optimize database queries for performance in Python applications?"}, {"from": "gpt", "value": "Use indexes, batch queries, and cache results. Example with SQLAlchemy:\n\n```python\nfrom sqlalchemy import select\n\n# Use efficient query\nstmt = select(User).where(User.email == 'alice@example.com')\nuser = session.execute(stmt).first()\n```\n\nComplexity:\n- With index: O(log n)\n- Without index: O(n)\nBest Practices:\n- Profile with EXPLAIN.\nAnti-patterns:\n- N+1 queries, unindexed joins."}]}
{"conversations": [{"from": "human", "value": "How do I implement a concurrent worker pool in Go for processing tasks?"}, {"from": "gpt", "value": "Go's goroutines and channels make worker pools simple:\n\n```go\npackage main\nimport (\n    \"fmt\"\n    \"sync\"\n)\n\nfunc worker(tasks <-chan int, wg *sync.WaitGroup) {\n    defer wg.Done()\n    for t := range tasks {\n        fmt.Println(\"Processing\", t)\n    }\n}\n\nfunc main() {\n    tasks := make(chan int, 10)\n    var wg sync.WaitGroup\n    for i := 0; i < 3; i++ {\n        wg.Add(1)\n        go worker(tasks, &wg)\n    }\n    for i := 0; i < 5; i++ {\n        tasks <- i\n    }\n    close(tasks)\n    wg.Wait()\n}\n```\n\nComplexity: O(1) per task.\nBest Practices: Use WaitGroup.\nAnti-patterns: Not closing channels."}]}
{"conversations": [{"from": "human", "value": "How do you define a simple neural network in Python using TensorFlow?"}, {"from": "gpt", "value": "A simple dense neural network in TensorFlow (2.x) for classification:\n\n```python\nimport tensorflow as tf\nfrom tensorflow.keras import layers, models\n\nmodel = models.Sequential([\n    layers.Dense(32, activation='relu', input_shape=(784,)),\n    layers.Dense(10, activation='softmax')\n])\n\nmodel.compile(optimizer='adam',\n              loss='sparse_categorical_crossentropy',\n              metrics=['accuracy'])\n```\n\nComplexity:\n- Forward/Backward: O(n*m) per layer.\nBest Practices:\n- Normalize input, choose suitable activation.\nAnti-patterns:\n- Too few layers for complex data."}]}
{"conversations": [{"from": "human", "value": "How do you implement immutable data structures in TypeScript?"}, {"from": "gpt", "value": "Use `readonly` and pure functions for immutability. Example:\n\n```typescript\ntype User = {\n    readonly id: number;\n    readonly name: string;\n};\n\nfunction updateName(user: User, newName: string): User {\n    // Returns new user, does not mutate original\n    return { ...user, name: newName };\n}\n```\n\nComplexity: O(1) for shallow copy.\nBest Practices:\n- Always use new objects for updates.\nAnti-patterns:\n- Mutating state directly."}]}
{"conversations": [{"from": "human", "value": "How do you create a secure password hash in Python?"}, {"from": "gpt", "value": "Use `bcrypt` for secure password hashing:\n\n```python\nimport bcrypt\n\ndef hash_password(password: str) -> bytes:\n    \"\"\"\n    Returns a bcrypt hash for a password.\n    \"\"\"\n    salt = bcrypt.gensalt()\n    return bcrypt.hashpw(password.encode(), salt)\n\ndef check_password(password: str, hashed: bytes) -> bool:\n    return bcrypt.checkpw(password.encode(), hashed)\n```\n\nComplexity: O(n) for hash, O(1) for check.\nBest Practices:\n- Use slow hashing (bcrypt, scrypt).\nAnti-patterns:\n- Storing plain text passwords."}]}
{"conversations": [{"from": "human", "value": "How do I implement a binary search algorithm in Python?"}, {"from": "gpt", "value": "Certainly! Binary search efficiently finds an element in a sorted list in O(log n) time.\n\n```python\ndef binary_search(arr: list[int], target: int) -> int:\n    \"\"\"\n    Performs binary search on a sorted list.\n    Args:\n        arr: Sorted list of integers.\n        target: Value to search for.\n    Returns:\n        Index of the target if found, else -1.\n    \"\"\"\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n```\n\nBest practice: Ensure input list is sorted.\nAnti-pattern: Using linear search for large sorted lists.\nComplexity: O(log n)"}]}
{"conversations": [{"from": "human", "value": "What's the difference between a stack and a queue in data structures?"}, {"from": "gpt", "value": "A stack follows Last-In-First-Out (LIFO) while a queue follows First-In-First-Out (FIFO). Here are Python implementations:\n\nStack:\n```python\nclass Stack:\n    \"\"\"Simple stack implementation.\"\"\"\n    def __init__(self):\n        self.items: list[int] = []\n    def push(self, item: int) -> None:\n        self.items.append(item)\n    def pop(self) -> int:\n        return self.items.pop()\n```\n\nQueue:\n```python\nfrom collections import deque\nclass Queue:\n    \"\"\"Simple queue using deque for O(1) operations.\"\"\"\n    def __init__(self):\n        self.items: deque[int] = deque()\n    def enqueue(self, item: int) -> None:\n        self.items.append(item)\n    def dequeue(self) -> int:\n        return self.items.popleft()\n```\n\nBest practice: Use deque for queues. Avoid using lists for queue operations (anti-pattern)."}]}
{"conversations": [{"from": "human", "value": "Can you explain the Singleton design pattern in Python?"}, {"from": "gpt", "value": "The Singleton ensures only one instance exists.\n\n```python\nclass Singleton:\n    \"\"\"Singleton class example.\"\"\"\n    _instance = None\n    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super().__new__(cls)\n        return cls._instance\n```\n\nUse singletons when a unique resource like a config or logger is needed. Anti-pattern: Using singletons for objects that should not be global. Complexity: O(1) instance creation."}]}
{"conversations": [{"from": "human", "value": "How do I create a RESTful API using FastAPI in Python?"}, {"from": "gpt", "value": "FastAPI allows quick API creation with async support.\n\n```python\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/items/{item_id}\")\ndef read_item(item_id: int) -> dict:\n    \"\"\"Fetch an item by ID.\"\"\"\n    return {\"item_id\": item_id}\n```\n\nBest practice: Use type hints, proper error handling. Anti-pattern: Mixing business logic in route handlers. Complexity: O(1) per request."}]}
{"conversations": [{"from": "human", "value": "What is a hash table and how is it implemented in Python?"}, {"from": "gpt", "value": "A hash table stores key-value pairs for O(1) access.\nPython's dict is a built-in hash table.\n\n```python\ndef demo_hash_table() -> None:\n    \"\"\"Demonstrate basic dict operations.\"\"\"\n    phonebook = {\"Alice\": \"123\", \"Bob\": \"456\"}\n    phonebook[\"Eve\"] = \"789\"  # Add\n    print(phonebook[\"Alice\"])   # Access\n    phonebook.pop(\"Bob\")        # Remove\n```\n\nBest practice: Avoid using mutable types as keys.\nAnti-pattern: Large number of collisions. Complexity: Average O(1), worst O(n) with collisions."}]}
{"conversations": [{"from": "human", "value": "How can I optimize a Python function for performance?"}, {"from": "gpt", "value": "Analyze bottlenecks first. Here's an optimized sum using built-in functions:\n\n```python\ndef calculate_sum(nums: list[int]) -> int:\n    \"\"\"Efficiently sum a list of integers.\"\"\"\n    return sum(nums)\n```\n\nBest practice: Use built-ins, vectorization (numpy for large data).\nAnti-pattern: Manually iterating with for-loops unnecessarily.\nComplexity: O(n). Use profiling tools like cProfile for deeper analysis."}]}
{"conversations": [{"from": "human", "value": "How do I use TypeScript to define types in a React component?"}, {"from": "gpt", "value": "TypeScript provides strong typing. Example:\n\n```typescript\ninterface Props {\n  title: string;\n  count?: number;\n}\n\nconst MyComponent: React.FC<Props> = ({ title, count = 0 }) => {\n  return <div>{title}: {count}</div>;\n};\n```\n\nBest practice: Use interfaces for props. Anti-pattern: Using 'any'. Complexity: Mostly compile-time safety, no runtime cost."}]}
{"conversations": [{"from": "human", "value": "How do I write a SQL query to find duplicate rows in a table?"}, {"from": "gpt", "value": "To find duplicates based on a column (e.g., email):\n\n```sql\nSELECT email, COUNT(*)\nFROM users\nGROUP BY email\nHAVING COUNT(*) > 1;\n```\n\nBest practice: Use indexes for performance. Anti-pattern: Checking each row with subqueries (slow). Complexity: O(n) scan."}]}
{"conversations": [{"from": "human", "value": "What is unit testing and how can I do it in Python with pytest?"}, {"from": "gpt", "value": "Unit tests validate small code pieces. Example with pytest:\n\n```python\ndef add(a: int, b: int) -> int:\n    return a + b\n\ndef test_add():\n    \"\"\"Test add function.\"\"\"\n    assert add(2, 3) == 5\n```\n\nRun tests with `pytest`. Best practice: Cover edge cases. Anti-pattern: Testing too much logic in one test."}]}
{"conversations": [{"from": "human", "value": "How can I debug a Go program efficiently?"}, {"from": "gpt", "value": "Use the 'delve' debugger (dlv):\n\n```go\n// main.go\ndef main() {\n    // Set breakpoint here!\n    fmt.Println(\"Debugging Go!\")\n}\n```\n\nStart debug:\n```bash\ndlv debug main.go\n```\n\nBest practice: Add clear log statements, use dlv breakpoints. Anti-pattern: Relying only on print statements."}]}
{"conversations": [{"from": "human", "value": "What's the difference between eager and lazy evaluation in Rust?"}, {"from": "gpt", "value": "Eager: evaluates immediately; Lazy: delays until needed.\n\nEager:\n```rust\nlet v = vec![1, 2, 3].iter().map(|x| x * 2).collect::<Vec<_>>();\n```\n\nLazy:\n```rust\nlet iter = vec![1, 2, 3].iter().map(|x| x * 2); // Not executed until collected\n```\n\nBest practice: Use lazy when chaining, eager for final result. Anti-pattern: Collecting after every step. Complexity: Lazy: O(1) memory until collected."}]}
{"conversations": [{"from": "human", "value": "How do I secure a web application against SQL injection?"}, {"from": "gpt", "value": "Use parameterized queries and ORM. Example in Python with sqlite:\n\n```python\nimport sqlite3\ndef get_user(username: str) -> dict:\n    \"\"\"Fetch user safely.\"\"\"\n    con = sqlite3.connect('db.sqlite')\n    cur = con.cursor()\n    cur.execute(\"SELECT * FROM users WHERE username=?\", (username,))\n    return cur.fetchone()\n```\n\nBest practice: Never concatenate SQL strings. Anti-pattern: Building SQL with string formatting. Complexity: O(1) per query."}]}
{"conversations": [{"from": "human", "value": "How do I deploy a Python web app to AWS Lambda?"}, {"from": "gpt", "value": "Package with dependencies via a deployment package or use AWS Serverless Application Model (SAM).\n\nExample handler:\n```python\ndef lambda_handler(event: dict, context: object) -> dict:\n    \"\"\"Simple AWS Lambda handler.\"\"\"\n    return {\"statusCode\": 200, \"body\": \"Hello World\"}\n```\n\nBest practice: Keep packages small. Anti-pattern: Large deployment zip. Complexity: O(1) per request."}]}
{"conversations": [{"from": "human", "value": "How do I implement concurrency in Go?"}, {"from": "gpt", "value": "Go uses goroutines and channels for concurrency.\n\n```go\nfunc worker(msg string, c chan string) {\n    c <- msg // Send message\n}\n\nfunc main() {\n    c := make(chan string)\n    go worker(\"hello\", c)\n    fmt.Println(<-c) // Receive message\n}\n```\n\nBest practice: Use channels for coordination. Anti-pattern: Using shared state without mutex. Complexity: Goroutine creation O(1)."}]}
{"conversations": [{"from": "human", "value": "How do I use Bash to monitor a running process's memory usage?"}, {"from": "gpt", "value": "You can use `ps` or `top`.\n\n```bash\n#!/bin/bash\npid=$1\nps -o pid,vsz,rss,comm -p $pid\n```\n\nBest practice: Automate monitoring scripts. Anti-pattern: Manual polling. Complexity: O(1) per check."}]}
{"conversations": [{"from": "human", "value": "How do I implement caching to speed up API responses in Python?"}, {"from": "gpt", "value": "Use functools.lru_cache for simple caching:\n\n```python\nfrom functools import lru_cache\n\n@lru_cache(maxsize=128)\ndef slow_api_call(arg: int) -> int:\n    \"\"\"Cache heavy calculations.\"\"\"\n    return arg * arg\n```\n\nBest practice: Tune cache size, use Redis for distributed cache. Anti-pattern: Caching mutable results. Complexity: O(1) cache hits."}]}
{"conversations": [{"from": "human", "value": "How do I preprocess data for machine learning in Python?"}, {"from": "gpt", "value": "Use pandas for cleaning, sklearn for encoding.\n\n```python\nimport pandas as pd\nfrom sklearn.preprocessing import StandardScaler\n\ndef preprocess(df: pd.DataFrame) -> pd.DataFrame:\n    \"\"\"Standardize numeric columns.\"\"\"\n    scaler = StandardScaler()\n    df[['age', 'salary']] = scaler.fit_transform(df[['age', 'salary']])\n    return df\n```\n\nBest practice: Normalize numerical data, encode categorical. Anti-pattern: Fitting scaler on test data. Complexity: O(n)."}]}
{"conversations": [{"from": "human", "value": "How do I create relationships between tables in SQL?"}, {"from": "gpt", "value": "Use foreign keys. Example:\n\n```sql\nCREATE TABLE users (\n  id INTEGER PRIMARY KEY,\n  name TEXT\n);\nCREATE TABLE orders (\n  id INTEGER PRIMARY KEY,\n  user_id INTEGER,\n  FOREIGN KEY(user_id) REFERENCES users(id)\n);\n```\n\nBest practice: Use referential integrity. Anti-pattern: Storing related data in one table. Complexity: O(1) for relation checks."}]}
{"conversations": [{"from": "human", "value": "How do I use Python's logging module for better debugging?"}, {"from": "gpt", "value": "Set up logging with levels:\n\n```python\nimport logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\ndef process() -> None:\n    \"\"\"Demonstrate logging.\"\"\"\n    logger.info(\"Processing started\")\n```\n\nBest practice: Use structured logs. Anti-pattern: Only print(). Complexity: O(1) per log entry."}]}
{"conversations": [{"from": "human", "value": "How can I use Docker to containerize a Python application?"}, {"from": "gpt", "value": "Create a Dockerfile:\n\n```dockerfile\nFROM python:3.10\nWORKDIR /app\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\nCMD [\"python\", \"app.py\"]\n```\n\nBuild with:\n```bash\ndocker build -t myapp .\ndocker run myapp\n```\n\nBest practice: Use slim images, multi-stage builds. Anti-pattern: Root user in container. Complexity: O(1) run."}]}
{"conversations": [{"from": "human", "value": "How do I implement a thread-safe counter in Rust?"}, {"from": "gpt", "value": "Use Atomic types or Mutex.\n\n```rust\nuse std::sync::{Arc, Mutex};\nuse std::thread;\n\nfn main() {\n    let counter = Arc::new(Mutex::new(0));\n    let mut handles = vec![];\n    for _ in 0..10 {\n        let counter = Arc::clone(&counter);\n        handles.push(thread::spawn(move || {\n            let mut num = counter.lock().unwrap();\n            *num += 1;\n        }));\n    }\n    for handle in handles { handle.join().unwrap(); }\n    println!(\"Result: {}\", *counter.lock().unwrap());\n}\n```\n\nBest practice: Use Arc for sharing, avoid deadlocks. Anti-pattern: Unprotected shared state."}]}
{"conversations": [{"from": "human", "value": "How do I implement binary search in Python?"}, {"from": "gpt", "value": "Here's a classic binary search implementation in Python:\n\n```python\ndef binary_search(arr: list[int], target: int) -> int:\n    \"\"\"Searches for target in sorted arr and returns its index or -1 if not found.\n    Args:\n        arr: A sorted list of integers.\n        target: An integer to search for.\n    Returns:\n        Index of target in arr or -1.\n    \"\"\"\n    left, right = 0, len(arr) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if arr[mid] == target:\n            return mid\n        elif arr[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n```\n\nTime complexity is O(log n). Always ensure the array is sorted before using binary search. Avoid using recursion for very large arrays to prevent stack overflow."}]}
{"conversations": [{"from": "human", "value": "How do I implement a singly linked list in Go?"}, {"from": "gpt", "value": "Below is a basic singly linked list in Go:\n\n```go\npackage main\n\nimport \"fmt\"\n\n// Node represents an element in the singly linked list.\ntype Node struct {\n    Value int\n    Next  *Node\n}\n\n// LinkedList manages the list.\ntype LinkedList struct {\n    Head *Node\n}\n\n// Insert adds a node at the start.\nfunc (ll *LinkedList) Insert(value int) {\n    newNode := &Node{Value: value, Next: ll.Head}\n    ll.Head = newNode\n}\n\n// Print displays all nodes.\nfunc (ll *LinkedList) Print() {\n    for curr := ll.Head; curr != nil; curr = curr.Next {\n        fmt.Printf(\"%d \", curr.Value)\n    }\n    fmt.Println()\n}\n\nfunc main() {\n    ll := &LinkedList{}\n    ll.Insert(1)\n    ll.Insert(2)\n    ll.Insert(3)\n    ll.Print() // Output: 3 2 1\n}\n```\n\nInsertion is O(1), traversal is O(n). Best practice: use interfaces for generic lists. Anti-pattern: forgetting to update pointers when inserting/removing."}]}
{"conversations": [{"from": "human", "value": "What is the Singleton pattern in TypeScript, with example?"}, {"from": "gpt", "value": "Singleton restricts a class to a single instance. In TypeScript:\n\n```typescript\nclass Singleton {\n    private static instance: Singleton;\n    private constructor() {}\n\n    public static getInstance(): Singleton {\n        if (!Singleton.instance) {\n            Singleton.instance = new Singleton();\n        }\n        return Singleton.instance;\n    }\n}\n\nconst obj1 = Singleton.getInstance();\nconst obj2 = Singleton.getInstance();\nconsole.log(obj1 === obj2); // true\n```\n\nUse Singleton for shared resources. Complexity: O(1) instance retrieval. Anti-pattern: global state; singletons can hurt testability. Prefer dependency injection when possible."}]}
{"conversations": [{"from": "human", "value": "How do I build a RESTful API endpoint to fetch user data in Python with Flask?"}, {"from": "gpt", "value": "Here's a simple Flask API endpoint:\n\n```python\nfrom flask import Flask, jsonify, request\n\napp = Flask(__name__)\n\n# Dummy user database\ndb = {\n    1: {'id': 1, 'name': 'Alice'},\n    2: {'id': 2, 'name': 'Bob'}\n}\n\n@app.route('/user/<int:user_id>', methods=['GET'])\ndef get_user(user_id: int):\n    \"\"\"Fetch user by ID.\"\"\"\n    user = db.get(user_id)\n    if user:\n        return jsonify(user), 200\n    return jsonify({'error': 'User not found'}), 404\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\nBest: Validate input, handle errors, use proper HTTP codes. Time: O(1) for dictionary lookup. Avoid: exposing sensitive data or missing authentication."}]}
{"conversations": [{"from": "human", "value": "How can I model a many-to-many relationship in SQL?"}, {"from": "gpt", "value": "Use a junction table. Example for students and courses:\n\n```sql\nCREATE TABLE students (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(100)\n);\n\nCREATE TABLE courses (\n    id SERIAL PRIMARY KEY,\n    title VARCHAR(100)\n);\n\nCREATE TABLE student_course (\n    student_id INT REFERENCES students(id),\n    course_id INT REFERENCES courses(id),\n    PRIMARY KEY (student_id, course_id)\n);\n```\n\nQuery joining:\n```sql\nSELECT s.name, c.title\nFROM students s\nJOIN student_course sc ON s.id = sc.student_id\nJOIN courses c ON sc.course_id = c.id;\n```\n\nComplexity: JOIN is O(n*m). Best: index junction table. Anti-pattern: duplicate rows in junction."}]}
{"conversations": [{"from": "human", "value": "How do I write a Python unit test for a function that adds two numbers?"}, {"from": "gpt", "value": "Use the unittest module:\n\n```python\nimport unittest\n\ndef add(a: int, b: int) -> int:\n    \"\"\"Returns the sum of two integers.\"\"\"\n    return a + b\n\nclass TestAdd(unittest.TestCase):\n    def test_add_positive(self):\n        self.assertEqual(add(2, 3), 5)\n\n    def test_add_negative(self):\n        self.assertEqual(add(-1, -2), -3)\n\nif __name__ == '__main__':\n    unittest.main()\n```\n\nBest: cover edge cases (zero, negatives). Complexity: O(1). Anti-pattern: testing implementation, not behavior."}]}
{"conversations": [{"from": "human", "value": "How do I debug a runtime error in Go?"}, {"from": "gpt", "value": "Use Go's built-in debugging tools and logs:\n\n```go\npackage main\nimport \"log\"\nfunc main() {\n    var arr = []int{1, 2, 3}\n    log.Println(\"Array:\", arr)\n    // Accessing index out of range\n    log.Println(\"Element at index 5:\", arr[5]) // runtime error: index out of range\n}\n```\n\nTo debug:\n1. Inspect logs for line number.\n2. Use `delve` debugger: `dlv debug .` and step through.\nBest: check boundaries before access.\nAnti-pattern: ignoring compile-time warnings and panic recoveries."}]}
{"conversations": [{"from": "human", "value": "How can I optimize a database query for performance?"}, {"from": "gpt", "value": "Use indexes and efficient queries:\n\n```sql\n-- Example: Find users by email\nCREATE INDEX idx_email ON users(email);\nSELECT * FROM users WHERE email = 'alice@example.com';\n```\n\nBest practices:\n- Use SELECT with only needed columns.\n- Avoid SELECT *.\n- Use LIMIT for pagination.\n- Analyze with EXPLAIN.\nTime: Indexed SELECT is O(log n).\nAnti-pattern: missing indexes or using complex joins without optimization."}]}
{"conversations": [{"from": "human", "value": "How do I implement a thread-safe counter in Python?"}, {"from": "gpt", "value": "Use threading and Lock:\n\n```python\nimport threading\n\nclass SafeCounter:\n    \"\"\"Thread-safe counter.\"\"\"\n    def __init__(self):\n        self.value = 0\n        self.lock = threading.Lock()\n\n    def increment(self) -> None:\n        with self.lock:\n            self.value += 1\n\n    def get(self) -> int:\n        with self.lock:\n            return self.value\n```\n\nLock ensures atomicity. Complexity: O(1) per op. Anti-pattern: no locking, causing race conditions. For performance, consider `threading.Semaphore` or `multiprocessing.Value` for process safety."}]}
{"conversations": [{"from": "human", "value": "How can I secure a web application against SQL injection in TypeScript using Express and PostgreSQL?"}, {"from": "gpt", "value": "Always use parameterized queries:\n\n```typescript\nimport { Pool } from 'pg';\nimport express from 'express';\n\nconst pool = new Pool();\nconst app = express();\n\napp.get('/user/:id', async (req, res) => {\n    const userId = req.params.id;\n    // Parameterized query prevents injection\n    const result = await pool.query('SELECT * FROM users WHERE id = $1', [userId]);\n    if (result.rows.length) {\n        res.json(result.rows[0]);\n    } else {\n        res.status(404).json({error: 'User not found'});\n    }\n});\n```\n\nComplexity: O(1) for indexed lookup. Anti-pattern: string interpolation in queries."}]}
{"conversations": [{"from": "human", "value": "How do I deploy a Python app to AWS Lambda?"}, {"from": "gpt", "value": "1. Write an AWS Lambda handler:\n\n```python\ndef lambda_handler(event: dict, context) -> dict:\n    \"\"\"Main Lambda entry point.\"\"\"\n    return {'statusCode': 200, 'body': 'Hello from Lambda!'}\n```\n\n2. Package dependencies using zip or serverless framework.\n3. Upload package to Lambda via AWS Console or CLI.\n4. Set handler to `lambda_handler`.\n\nBest: Use environment variables for config, minimal cold start code.\nAnti-pattern: heavy modules in global scope, storing state locally. Complexity: Lambda invocation is O(1)."}]}
{"conversations": [{"from": "human", "value": "How do I implement merge sort in Rust?"}, {"from": "gpt", "value": "Rust implementation of merge sort:\n\n```rust\n/// Performs merge sort on a vector of integers.\npub fn merge_sort(arr: &mut [i32]) {\n    let len = arr.len();\n    if len <= 1 {\n        return;\n    }\n    let mid = len / 2;\n    merge_sort(&mut arr[..mid]);\n    merge_sort(&mut arr[mid..]);\n    let mut merged = arr.to_vec();\n    let (left, right) = merged.split_at_mut(mid);\n    merge(arr, left, right);\n}\n\nfn merge(arr: &mut [i32], left: &[i32], right: &[i32]) {\n    let mut i = 0;\n    let mut j = 0;\n    for k in 0..arr.len() {\n        if i < left.len() && (j >= right.len() || left[i] <= right[j]) {\n            arr[k] = left[i];\n            i += 1;\n        } else {\n            arr[k] = right[j];\n            j += 1;\n        }\n    }\n}\n```\n\nTime complexity is O(n log n). Practice: prefer `Vec<T>` and avoid unnecessary cloning. Anti-pattern: using recursion with very large arrays (stack overflow)."}]}
{"conversations": [{"from": "human", "value": "How do I check if a string is a palindrome in Python?"}, {"from": "gpt", "value": "To check for palindrome:\n\n```python\ndef is_palindrome(s: str) -> bool:\n    \"\"\"Checks if a string is a palindrome.\"\"\"\n    s_clean = ''.join(c.lower() for c in s if c.isalnum())\n    return s_clean == s_clean[::-1]\n```\n\nBest: Normalize case and remove non-alphanumerics. Complexity: O(n). Anti-pattern: comparing original string with its reverse without normalization."}]}
{"conversations": [{"from": "human", "value": "How can I use Bash scripting to automate file backups?"}, {"from": "gpt", "value": "Below is a simple backup script:\n\n```bash\n#!/bin/bash\n# Backup script with timestamp\nSOURCE_DIR=\"$1\"\nBACKUP_DIR=\"$2\"\nTIMESTAMP=$(date +%Y%m%d%H%M%S)\nBACKUP_NAME=\"backup_$TIMESTAMP.tar.gz\"\ntar -czf \"$BACKUP_DIR/$BACKUP_NAME\" \"$SOURCE_DIR\"\necho \"Backup created: $BACKUP_DIR/$BACKUP_NAME\"\n```\n\nUsage: `./backup.sh /path/to/source /path/to/backup`\nBest: log backups, rotate old backups. Anti-pattern: not checking disk space or error handling."}]}
{"conversations": [{"from": "human", "value": "How do I use memoization for dynamic programming in Python?"}, {"from": "gpt", "value": "Use functools.lru_cache:\n\n```python\nfrom functools import lru_cache\n\ndef fib(n: int) -> int:\n    \"\"\"Compute nth Fibonacci number with memoization.\"\"\"\n    @lru_cache(maxsize=None)\n    def _fib(x: int) -> int:\n        if x < 2:\n            return x\n        return _fib(x - 1) + _fib(x - 2)\n    return _fib(n)\n```\n\nTime: O(n) vs O(2^n) for naive recursion. Best: Use cache for overlapping subproblems. Anti-pattern: global dictionary for memoization (thread safety issues)."}]}
{"conversations": [{"from": "human", "value": "How do I create a responsive web page layout using CSS Grid?"}, {"from": "gpt", "value": "Example CSS Grid layout:\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n<style>\n.container {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n}\n.item {\n  background: #eee;\n  padding: 20px;\n  text-align: center;\n}\n</style>\n</head>\n<body>\n<div class=\"container\">\n  <div class=\"item\">Item 1</div>\n  <div class=\"item\">Item 2</div>\n  <div class=\"item\">Item 3</div>\n</div>\n</body>\n</html>\n```\n\nBest: use minmax and auto-fit for responsiveness. Anti-pattern: fixed pixel widths."}]}
{"conversations": [{"from": "human", "value": "How do I train a basic machine learning model using scikit-learn in Python?"}, {"from": "gpt", "value": "Example for linear regression:\n\n```python\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import mean_squared_error\nimport numpy as np\n\nX = np.array([[1], [2], [3], [4]])\ny = np.array([2, 4, 6, 8])\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.25)\nmodel = LinearRegression()\nmodel.fit(X_train, y_train)\npreds = model.predict(X_test)\nmse = mean_squared_error(y_test, preds)\nprint(f\"MSE: {mse}\")\n```\n\nBest: split data, evaluate metrics. Complexity: fit O(n). Anti-pattern: fit-predict on same data (overfitting)."}]}
{"conversations": [{"from": "human", "value": "How do I detect memory leaks in Rust?"}, {"from": "gpt", "value": "Rust's ownership prevents most leaks, but leaks can happen with unsafe code or Rc cycles:\n\n```rust\nuse std::rc::Rc;\nuse std::cell::RefCell;\n\nstruct Node {\n    next: Option<Rc<RefCell<Node>>>\n}\n\nfn main() {\n    let a = Rc::new(RefCell::new(Node { next: None }));\n    let b = Rc::new(RefCell::new(Node { next: Some(a.clone()) }));\n    a.borrow_mut().next = Some(b.clone()); // creates cycle\n}\n```\n\nMemory leaks occur if Rc cycles are not broken. Detect leaks with tools like `valgrind` or use `Weak` references. Anti-pattern: ignoring cycles in reference counted structures."}]}
